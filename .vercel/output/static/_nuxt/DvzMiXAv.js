import{A as w,e as H,aK as Y,aL as G,aM as L,aN as $,i as I,L as U,af as x,aB as W,r as O,y as M,C as z,K as J,aO as Q,a1 as R,aP as q,m as X,p as Z,v as k,b as F,a as S,Q as K,G as A,E as ee,H as ae}from"./C3kjzMtU.js";import{d as _}from"./mBT6zqPb.js";import{u as te,m as ne,c as oe}from"./CmBl7gUm.js";import{d as se,a as ie}from"./nnWVgYXg.js";import{V as re}from"./CRkdr6Wn.js";const ce={trailing:!0};function le(e,a=25,s={}){if(s={...ce,...s},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let c,i,o=[],t,l;const d=(u,n)=>(t=de(e,u,n),t.finally(()=>{if(t=null,s.trailing&&l&&!i){const r=d(u,l);return l=null,r}}),t);return function(...u){return t?(s.trailing&&(l=u),t):new Promise(n=>{const r=!i&&s.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const f=s.leading?c:d(this,u);for(const g of o)g(f);o=[]},a),r?(c=d(this,u),n(c)):o.push(n)})}}async function de(e,a,s){return await e.apply(a,s)}const ue=Symbol.for("nuxt:client-only");function fe(...e){const a=typeof e[e.length-1]=="string"?e.pop():void 0;he(e[0],e[1])&&e.unshift(a);let[s,c,i={}]=e;const o=w(()=>W(s));if(typeof o.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const t=H();i.server??=!0,i.default??=ye,i.getCachedData??=B,i.lazy??=!1,i.immediate??=!0,i.deep??=Y.deep,i.dedupe??="cancel",i._functionName,t._asyncData[o.value];const l={cause:"initial",dedupe:i.dedupe};t._asyncData[o.value]?._init||(l.cachedData=i.getCachedData(o.value,t,{cause:"initial"}),t._asyncData[o.value]=T(t,o.value,c,i,l.cachedData));const d=t._asyncData[o.value];d._deps++;const u=()=>t._asyncData[o.value].execute(l),n=i.server!==!1&&t.payload.serverRendered;{let g=function(h){const y=t._asyncData[h];y?._deps&&(y._deps--,y._deps===0&&y?._off())};const m=G();if(m&&n&&i.immediate&&!m.sp&&(m.sp=[]),m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const h=m._nuxtOnBeforeMountCbs;L(()=>{h.forEach(y=>{y()}),h.splice(0,h.length)}),$(()=>h.splice(0,h.length))}const p=m&&(m._nuxtClientOnly||I(ue,!1));n&&t.isHydrating&&(d.error.value||d.data.value!==void 0)?d.status.value=d.error.value?"error":"success":m&&(!p&&t.payload.serverRendered&&t.isHydrating||i.lazy)&&i.immediate?m._nuxtOnBeforeMountCbs.push(u):i.immediate&&d.status.value!=="success"&&u();const D=q(),v=U([o,...i.watch||[]],([h],[y])=>{if((h||y)&&h!==y){const E=t._asyncData[y]?.data.value!==void 0,j=t._asyncDataPromises[y]!==void 0;y&&g(y);const P={cause:"initial",dedupe:i.dedupe};if(!t._asyncData[h]?._init){let b;y&&E?b=t._asyncData[y]?.data.value:(b=i.getCachedData(h,t,{cause:"initial"}),P.cachedData=b),t._asyncData[h]=T(t,h,c,i,b)}t._asyncData[h]._deps++,(i.immediate||E||j)&&t._asyncData[h].execute(P)}else d._execute({cause:"watch",dedupe:i.dedupe})},{flush:"sync"});D&&x(()=>{v(),g(o.value)})}const r={data:C(()=>t._asyncData[o.value]?.data),pending:C(()=>t._asyncData[o.value]?.pending),status:C(()=>t._asyncData[o.value]?.status),error:C(()=>t._asyncData[o.value]?.error),refresh:(...g)=>t._asyncData[o.value].execute(...g),execute:(...g)=>t._asyncData[o.value].execute(...g),clear:()=>V(t,o.value)},f=Promise.resolve(t._asyncDataPromises[o.value]).then(()=>r);return Object.assign(f,r),f}function C(e){return w({get(){return e()?.value},set(a){const s=e();s&&(s.value=a)}})}function he(e,a){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof a=="function")}function V(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=R(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function me(e,a){const s={};for(const c of a)s[c]=e[c];return s}function T(e,a,s,c,i){e.payload._errors[a]??=void 0;const o=c.getCachedData!==B,t=s,l=c.deep?O:M,d=i!==void 0,u=e.hook("app:data:refresh",async r=>{(!r||r.includes(a))&&await n.execute({cause:"refresh:hook"})}),n={data:l(d?i:c.default()),pending:w(()=>n.status.value==="pending"),error:z(e.payload._errors,a),status:M("idle"),execute:(...r)=>{const[f,g=void 0]=r,m=f&&g===void 0&&typeof f=="object"?f:{};if(e._asyncDataPromises[a]){if((m.dedupe??c.dedupe)==="defer")return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}{const D="cachedData"in m?m.cachedData:c.getCachedData(a,e,{cause:m.cause??"refresh:manual"});if(D!==void 0)return e.payload.data[a]=n.data.value=D,n.error.value=void 0,n.status.value="success",Promise.resolve(D)}n.status.value="pending";const p=new Promise((D,v)=>{try{D(t(e))}catch(h){v(h)}}).then(async D=>{if(p.cancelled)return e._asyncDataPromises[a];let v=D;c.transform&&(v=await c.transform(D)),c.pick&&(v=me(v,c.pick)),e.payload.data[a]=v,n.data.value=v,n.error.value=void 0,n.status.value="success"}).catch(D=>{if(p.cancelled)return e._asyncDataPromises[a];n.error.value=Q(D),n.data.value=R(c.default()),n.status.value="error"}).finally(()=>{p.cancelled||delete e._asyncDataPromises[a]});return e._asyncDataPromises[a]=p,e._asyncDataPromises[a]},_execute:le((...r)=>n.execute(...r),0,{leading:!0}),_default:c.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[a]?._init&&(e._asyncData[a]._init=!1),o||J(()=>{e._asyncData[a]?._init||(V(e,a),n.execute=()=>Promise.resolve())})}};return n}const ye=()=>{},B=(e,a,s)=>{if(a.isHydrating)return a.payload.data[e];if(s.cause!=="refresh:manual"&&s.cause!=="refresh:hook")return a.static.data[e]};function ge(e,a,s){const i=s+Math.ceil(29.5*(a-1))+(e-1)*354+Math.floor((3+11*e)/30)+19484395e-1-1+68569,o=Math.floor(4*i/146097),t=i-Math.floor((146097*o+3)/4),l=Math.floor(4e3*(t+1)/1461001),d=t-Math.floor(1461*l/4)+31,u=Math.floor(80*d/2447),n=d-Math.floor(2447*u/80),r=Math.floor(u/11),f=u+2-12*r,g=100*(o-49)+l+r;return new Date(g,f-1,n,0,0,0)}function N(e){const a={"Mawlid al-Nabi":{month:3,day:12,am:"መውሊድ",description:"Birth of the Prophet Muhammad."},"Eid al-Fitr":{month:10,day:1,am:"ኢድ አል-ፈጥር",description:"End of Ramadan."},"Eid al-Adha":{month:12,day:10,am:"ኢድ አል-አድሐ (አረፋ)",description:"Feast of Sacrifice."}},s={},c=Math.round((e-622)*33/32);for(const i of[c-1,c])for(const o in a){const t=a[o],l=ge(i,t.month,t.day);if(l.getFullYear()===e){const d=s[o]?`${o} (2)`:o;s[d]={date:l,am:t.am,description:t.description}}}return s}function De(e){const a=e%19,s=e%7,c=e%4,i=(19*a+16)%30,o=(2*c+4*s+6*i)%7,t=i+o,l=t>25?4:3,d=t>25?t-25:t+5,u=`${e}-${String(l).padStart(2,"0")}-${String(d).padStart(2,"0")}`,n=new Date(u);return n.setDate(n.getDate()+13),n}function ve(e){const a=[],s=_.toGregorian(e,1,1)[0],c=_.toGregorian(e,12,30)[0];[{title:{am:"አዲስ ዓመት",en:"Ethiopian New Year"},date:{month:1,day:1},category:"National",description:"Marks the beginning of the Ethiopian calendar year.",detail:"/NewYear"},{title:{am:"መስቀል",en:"Finding of the True Cross"},date:{month:1,day:17},category:"Religious",description:"Commemorates the finding of the True Cross.",detail:"/FindingOfTheTrueCross"},{title:{am:"የገና በዓል",en:"Ethiopian Christmas"},date:{month:4,day:29},category:"Religious",description:"Celebrates the birth of Jesus Christ.",detail:"/EthiopiaChristmas"},{title:{am:"ጥምቀት",en:"Epiphany"},date:{month:5,day:11},category:"Religious",description:"Celebrates the baptism of Jesus.",detail:"/EthiopiaEpiphany"},{title:{am:"የአድዋ ድል በዓል",en:"Adwa Victory Day"},date:{month:6,day:23},category:"National",description:"Commemorates the Battle of Adwa.",detail:"/AdwaVictoryDay"},{title:{am:"ዓለም አቀፍ የሠራተኞች ቀን",en:"International Labor Day"},date:{month:8,day:23},category:"National",description:"Celebrates workers achievements.",detail:"/InternationalLaborDay"},{title:{am:"የአርበኞች ቀን",en:"Patriots' Victory Day"},date:{month:8,day:27},category:"National",description:"Commemorates the end of Italian occupation.",detail:"/PatriotsVictoryDay"},{title:{am:"የደርግ መውደቅ",en:"Downfall of the Derg"},date:{month:9,day:20},category:"National",description:"Marks the end of the Derg regime.",detail:"/DownfallOfDerg"}].forEach(n=>{const r=_.toGregorian(e,n.date.month,n.date.day),f=new Date(r[0],r[1]-1,r[2]);a.push({...n,ethiopianDate:{year:e,month:n.date.month,day:n.date.day},gregorianDate:f,dayOfWeek:f.toLocaleDateString("en-US",{weekday:"long"})})});const o=De(c),t=_.toEthiopian(o.getFullYear(),o.getMonth()+1,o.getDate());if(t[0]===e){const n=new Date(o);n.setDate(o.getDate()-2);const r=_.toEthiopian(n.getFullYear(),n.getMonth()+1,n.getDate());a.push({title:{am:"ስቅለት",en:"Good Friday"},category:"Religious",description:"Commemorates the crucifixion of Jesus.",detail:"/GoodFriday",ethiopianDate:{year:r[0],month:r[1],day:r[2]},gregorianDate:n,dayOfWeek:"Friday"}),a.push({title:{am:"ፋሲካ",en:"Easter"},category:"Religious",description:"Celebrates the resurrection of Jesus.",detail:"/Easter",ethiopianDate:{year:t[0],month:t[1],day:t[2]},gregorianDate:o,dayOfWeek:"Sunday"})}const l=N(s),d=N(c),u={...l,...d};for(const n in u){const r=u[n],f=_.toEthiopian(r.date.getFullYear(),r.date.getMonth()+1,r.date.getDate());f[0]===e&&a.push({title:{am:r.am,en:n},category:"Religious",description:`${r.description} (Date is an estimate and may vary based on moon sighting.)`,detail:`/${n.replace(/\s+/g,"")}`,ethiopianDate:{year:f[0],month:f[1],day:f[2]},gregorianDate:r.date,dayOfWeek:r.date.toLocaleDateString("en-US",{weekday:"long"})})}return a.sort((n,r)=>n.ethiopianDate.month!==r.ethiopianDate.month?n.ethiopianDate.month-r.ethiopianDate.month:n.ethiopianDate.day-r.ethiopianDate.day)}function Pe(e){switch(e){case"Religious":return"teal";case"National":return"indigo";default:return"grey"}}function Me(){const e=new Date,a=_.toEthiopian(e.getFullYear(),e.getMonth()+1,e.getDate())||[new Date().getFullYear()-8,1,1],s=O(a[0]),{data:c,pending:i,error:o}=fe("holidays",async()=>{try{return await Promise.resolve(ve(s.value))}catch(l){throw console.error(`Failed to get holidays for year ${s.value}:`,l),new Error("There was a problem calculating the holidays. Please try a different year or refresh the page.")}},{watch:[s]}),t=w(()=>{const l=a[0],d=[];for(let u=-5;u<=5;u++)d.push(l+u);return d});return{selectedYear:s,holidays:c,availableYears:t,pending:i,error:o}}const _e=Z({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...oe(),...ie(),...ne(),...ae()},"VTable"),Fe=X()({name:"VTable",props:_e(),setup(e,a){let{slots:s,emit:c}=a;const{themeClasses:i}=k(e),{densityClasses:o}=se(e);return te(()=>{const t={VCheckboxBtn:{density:e.density}};return F(e.tag,{class:ee(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!s.top,"v-table--has-bottom":!!s.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},i.value,o.value,e.class]),style:A(e.style)},{default:()=>[s.top?.(),F(re,{defaults:t},{default:()=>[s.default?S("div",{class:"v-table__wrapper",style:{height:K(e.height)}},[S("table",null,[s.default()])]):s.wrapper?.()]}),s.bottom?.()]})}),{}}});export{Fe as V,Pe as g,_e as m,Me as u};
